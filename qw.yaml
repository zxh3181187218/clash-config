# 基本配置
port: 7890
socks-port: 7891
redir-port: 7892
allow-lan: true
mode: Rule
log-level: info
ipv6: false

# 外部控制器配置
external-controller: '0.0.0.0:9090'
secret: 'your_strong_password'

# DNS配置（关键防泄漏设置）
dns:
  enable: true
  listen: 0.0.0.0:53
  enhanced-mode: redir-host
  nameserver:
    - 114.114.114.114
    - 8.8.8.8
  fallback:
    - tcp://1.1.1.1
  fake-ip-range: 198.18.0.1/16
  use-host: true

# 代理节点配置
proxies:
  - name: "成都节点"
    type: vmess
    server: 47.108.130.60
    port: 25477
    uuid: 8f800fe3-5af8-4021-cc74-fc159ca640a9
    alterId: 0
    cipher: auto
    network: ws
    ws-path: /
    ws-headers:
      host: pull.free.video.10010.com
    tls: false
    sni: pull.free.video.10010.com
    skip-cert-verify: true
    udp: true

  - name: "德国节点"
    type: vless
    server: 47.108.130.60
    port: 51398
    uuid: 8f800fe3-5af8-4021-cc74-fc159ca640a9
    network: ws
    ws-path: /
    ws-headers:
      host: pull.free.video.10010.com
    tls: false
    sni: pull.free.video.10010.com
    skip-cert-verify: true
    udp: true

# 代理组配置
proxy-groups:
  - name: PROXY
    type: select
    proxies:
      - 成都节点
      - 德国节点

# 规则配置（关键分流设置）
rules:
  # 中国IP直连（使用成都节点）
  - GEOIP, CN, 成都节点
  # 中国域名直连（使用成都节点）
  - DOMAIN-SUFFIX, 10010.com, 成都节点
  - DOMAIN-SUFFIX, cmcc.com, 成都节点
  - DOMAIN-SUFFIX, chinaunicom.com, 成都节点
  - DOMAIN-SUFFIX, alibaba.com, 成都节点
  - DOMAIN-SUFFIX, taobao.com, 成都节点
  - DOMAIN-SUFFIX, jd.com, 成都节点
  - DOMAIN-SUFFIX, weibo.com, 成都节点
  - DOMAIN-SUFFIX, qq.com, 成都节点
  - DOMAIN-SUFFIX, baidu.com, 成都节点
  # 非中国IP走德国节点
  - GEOIP, !CN, 德国节点
  # 其他国际域名走德国节点
  - DOMAIN-SUFFIX, google.com, 德国节点
  - DOMAIN-SUFFIX, facebook.com, 德国节点
  - DOMAIN-SUFFIX, twitter.com, 德国节点
  - DOMAIN-SUFFIX, youtube.com, 德国节点
  - DOMAIN-SUFFIX, netflix.com, 德国节点
  # 匹配所有其他流量
  - MATCH, PROXY
