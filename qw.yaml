# 基本配置
port: 7890
socks-port: 7891
redir-port: 7892
allow-lan: true
mode: Rule
log-level: info
ipv6: false

# 外部控制器配置
external-controller: '0.0.0.0:9090'
secret: 'your_strong_password'

# DNS配置（关键防泄漏设置）
dns:
  enable: true
  listen: 0.0.0.0:53
  enhanced-mode: redir-host
  nameserver:
    - 1.1.1.1
    - 8.8.8.8
  fallback:
    - tcp://1.1.1.1
  fake-ip-range: 198.18.0.1/16
  use-host: true

# 代理节点配置
proxies:
  - name: "成都节点"
    type: vmess
    server: 47.108.130.60
    port: 25477
    uuid: 8f800fe3-5af8-4021-cc74-fc159ca640a9
    alterId: 0
    cipher: auto
    network: ws
    ws-path: /
    ws-headers:
      host: pull.free.video.10010.com
    tls: false
    sni: pull.free.video.10010.com
    skip-cert-verify: true
    udp: true

  - name: "德国节点"
    type: vless
    server: 47.108.130.60
    port: 51398
    uuid: 8f800fe3-5af8-4021-cc74-fc159ca640a9
    network: ws
    ws-path: /
    ws-headers:
      host: pull.free.video.10010.com
    tls: false
    sni: pull.free.video.10010.com
    skip-cert-verify: true
    udp: true

# 代理组配置
proxy-groups:
  - name: gn
    type: select
    proxies:
      - 成都节点
  - name: gw
    type: select
    proxies:
      - 德国节点

# 规则配置（关键分流设置）
rules:
  # 中国IP直连（使用成都节点）
  - GEOSITE, CN,gn
  - GEOIP, CN, gn
  # 匹配所有其他流量
  - MATCH, gw
