# ---------------------------------------------------
# 基础设置
# ---------------------------------------------------
mixed-port: 7890
allow-lan: true
mode: rule
log-level: info
ipv6: false
external-controller: 127.0.0.1:9090

dns:
  enable: true
  listen: 0.0.0.0:1053
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  nameserver:
    - 223.5.5.5
    - 119.29.29.29

# ---------------------------------------------------
# 节点区域 (关键修改)
# ---------------------------------------------------
proxies:
  # 1. 成都节点 (入口)
  - name: "🇨🇳 成都 (入口)"
    type: vmess
    server: 47.108.130.60
    port: 25477
    uuid: 8f800fe3-5af8-4021-cc74-fc159ca640a9
    alterId: 0
    cipher: auto
    network: ws
    udp: true                # 必须开启
    packet-encoding: xudp    # [关键修改] 强制使用 XUDP 封装以支持 Hy2 穿透
    ws-opts:
      path: "/"
      headers:
        Host: pull.free.video.10010.com

  # 2. 美国 Hy2 节点 (出口)
  - name: "🇺🇸 美国 Hy2 (出口)"
    type: hysteria2
    # [关键修改] 请将下方的域名改为该域名的真实 IP 地址！
    # 原因：成都服务器可能无法解析这个域名。
    # 你可以在电脑上 ping hy2.zxh425.dpdns.org 获得 IP。
    # 如果实在找不到 IP，先保留域名试试，但极大几率失败。
    server: 104.223.33.224
    port: 443
    password: "9hT3m6FvRkS1e8PnL5"
    sni: hy2.zxh425.dpdns.org # 这里的域名必须保留，用于验证
    obfs: salamander
    obfs-password: "8dS6p4JtMwE3q7VkH2"
    skip-cert-verify: true
    fingerprint: chrome       # [建议] 模拟浏览器指纹

# ---------------------------------------------------
# 链式代理组
# ---------------------------------------------------
proxy-groups:
  - name: "🚀 节点选择"
    type: select
    proxies:
      - "🔗 链式中转"
      - "🇨🇳 成都 (入口)"
      - DIRECT

  # 链式逻辑：流量 -> 成都 -> 美国 -> 目标
  - name: "🔗 链式中转"
    type: relay
    proxies:
      - "🇨🇳 成都 (入口)"
      - "🇺🇸 美国 Hy2 (出口)"

rules:
  - GEOIP,CN,DIRECT
  - MATCH,🚀 节点选择
