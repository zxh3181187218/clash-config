# ---------------------------------------------------
# Clash Meta (Mihomo) é…ç½®æ–‡ä»¶
# ç”Ÿæˆæ—¶é—´: 2025-11-28
# ---------------------------------------------------

# åŸºç¡€è®¾ç½®
mixed-port: 2080               # å¯¹åº”åŸé…ç½®çš„ mixed-in ç«¯å£
allow-lan: false               # åŸé…ç½®ç›‘å¬ 127.0.0.1ï¼Œæ•…ä¸å¼€æ”¾ LAN
mode: rule
log-level: info
ipv6: true                     # åŸé…ç½®åŒ…å« IPv6

# å¤–éƒ¨æ§åˆ¶ (å¯é€‰ï¼Œç”¨äºé¢æ¿)
external-controller: 127.0.0.1:9090

# DNS è®¾ç½® (å¯¹åº”åŸé…ç½®çš„ dns æ¨¡å—)
dns:
  enable: true
  listen: 0.0.0.0:1053
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.0/15
  fake-ip-filter:
    - "*"
    - "+.lan"
    - "+.local"
  
  # é»˜è®¤ DNS (ç”¨äºè§£æ DoH åŸŸåç­‰)
  default-nameserver:
    - 223.5.5.5
    - 114.114.114.114
  
  # ä¸»è¦ NameServer (å›½å¤–/ä»£ç† DNS)
  nameserver:
    - https://dns.google/dns-query
  
  # Fallback (å›½å†…/ç›´è¿ DNS)
  fallback:
    - https://223.5.5.5/dns-query
    - https://1.12.12.12/dns-query
  
  # é…ç½®ä½•æ—¶ä½¿ç”¨ Fallback å›é€€ (æ ¹æ® GeoIP åˆ¤æ–­)
  fallback-filter:
    geoip: true
    geoip-code: CN
    ipcidr:
      - 240.0.0.0/4

# ä»£ç†èŠ‚ç‚¹ (Hysteria2)
proxies:
  - name: "ğŸ‡ºğŸ‡¸ ç¾å›½ Hysteria2"
    type: hysteria2
    server: ipv6.zxh425.dpdns.org
    port: 443
    password: "3n5T8b9NhTZe5cm2NW"
    # å¯¹åº”åŸé…ç½®çš„ obfs
    obfs: salamander
    obfs-password: "96Jj12oLbwuEQOrZ39"
    # å¯¹åº” tls è®¾ç½®
    sni: ipv6.zxh425.dpdns.org
    skip-cert-verify: false
    alpn:
      - h3
    # å¯¹åº” hop_interval: 10s
    hop-interval: 10
    # å¯¹åº” up_mbps / down_mbps (0 ä¸ºä¸é™åˆ¶)
    up: 0
    down: 0

# ç­–ç•¥ç»„
proxy-groups:
  - name: "ğŸš€ èŠ‚ç‚¹é€‰æ‹©"
    type: select
    proxies:
      - "ğŸ‡ºğŸ‡¸ ç¾å›½ Hysteria2"
      - "DIRECT"

# è§„åˆ™ (å¯¹åº”åŸé…ç½®çš„ route)
rules:
  # 1. é˜»æ–­ UDP 443 (QUIC)ï¼Œå¯¹åº”åŸé…ç½® reject udp 443
  - AND,((NETWORK,UDP),(DST-PORT,443)),REJECT

  # 2. é˜»æ–­å¤šæ’­/ä¿ç•™åœ°å€ï¼Œå¯¹åº”åŸé…ç½® reject ip_cidr 224.0.0.0/3 ç­‰
  - IP-CIDR,224.0.0.0/3,REJECT,no-resolve
  - IP-CIDR,ff00::/8,REJECT,no-resolve

  # 3. å¹¿å‘Šæ‹¦æˆªï¼Œå¯¹åº” geosite:category-ads-all
  - GEOSITE,category-ads-all,REJECT

  # 4. ç‰¹æ®Šè§„åˆ™: googleapis.cn èµ°ä»£ç†
  - DOMAIN-SUFFIX,googleapis.cn,ğŸš€ èŠ‚ç‚¹é€‰æ‹©

  # 5. å›½å†…æµé‡ç›´è¿ï¼Œå¯¹åº” geosite:cn å’Œ geoip:cn
  - GEOSITE,cn,DIRECT
  - GEOIP,cn,DIRECT

  # 6. å‰©ä½™æµé‡èµ°ä»£ç†
  - MATCH,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
