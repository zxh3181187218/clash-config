# --- åŸºç¡€è®¾ç½® ---
port: 7890
socks-port: 7891
allow-lan: true
mode: rule
log-level: info
ipv6: true
external-controller: 127.0.0.1:9090

# --- DNS è®¾ç½® (å…³é”®ä¿®æ­£) ---
dns:
  enable: true
  listen: 0.0.0.0:53
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  ipv6: true
  
  # 1. é»˜è®¤ DNS: ç”¨äºè§£æâ€œèŠ‚ç‚¹æœ¬èº«çš„åŸŸåâ€
  # å¿…é¡»åŒ…å«å›½å†… DNSï¼Œå¦åˆ™è¿˜æ²¡è¿ä¸Šä»£ç†å°±æ‰¾ä¸åˆ°èŠ‚ç‚¹åœ¨å“ª
  default-nameserver:
    - 223.5.5.5    # é˜¿é‡Œ DNS (è§£å†³èŠ‚ç‚¹è§£æé—®é¢˜)
    - 119.29.29.29 # è…¾è®¯ DNS
    - 1.1.1.1      # å¤‡ç”¨
  
  # 2. æ ¸å¿ƒ nameserver: ä»£ç†è¿ä¸Šåï¼ŒçœŸæ­£æŸ¥è¯¢éšç§æ•°æ®çš„ DNS
  # è¿™é‡Œä¾ç„¶ä¿æŒä½ çš„è¦æ±‚ï¼šä¼˜å…ˆç”¨ Cloudflare/Google
  nameserver:
    - https://1.1.1.1/dns-query
    - https://8.8.8.8/dns-query
    
  # 3. å…œåº•ç­–ç•¥
  fallback:
    - https://1.1.1.1/dns-query
    - https://8.8.8.8/dns-query
  
  fallback-filter:
    geoip: true
    ipcidr:
      - 240.0.0.0/4

# --- èŠ‚ç‚¹åˆ—è¡¨ ---
proxies:
  # [1] ğŸ‡©ğŸ‡ª å¾·å›½ VLESS (IPv4)
  - name: "ğŸ‡©ğŸ‡ª å¾·å›½ VLESS"
    type: vless
    server: 47.108.130.61
    port: 51398
    uuid: 8f800fe3-5af8-4021-cc74-fc159ca640a9
    network: ws
    tls: false
    udp: true
    ws-opts:
      path: "/"
      headers:
        Host: pull.free.video.10010.com

  # [2] ğŸš€ Hy2 å¤‡ç”¨ (IPv6)
  - name: "ğŸš€ Hy2 å¤‡ç”¨"
    type: hysteria2
    server: ipv6.zxh425.dpdns.org
    port: 443
    password: 9hT3m6FvRkS1e8PnL5
    sni: ipv6.zxh425.dpdns.org
    obfs: salamander
    obfs-password: 8dS6p4JtMwE3q7VkH2
    skip-cert-verify: true

  # [3] â˜ï¸ VLESS Vision (IPv6)
  - name: "â˜ï¸ VLESS Vision"
    type: vless
    server: ipv6.zxh425.dpdns.org
    port: 443
    uuid: 3a7d914d-86d9-4cec-8e65-b08f5c0b98ab
    network: tcp
    tls: true
    udp: true
    flow: xtls-rprx-vision
    servername: gateway.icloud.com
    client-fingerprint: chrome
    reality-opts:
      public-key: IXNtZnkoBPz2Yz-o1Jia8gQLeCj4mh-cszPFQys_OH4
      short-id: f71dda44e6f4f3b7

  # [4] ğŸ‡¨ğŸ‡³ å›½å†…ä¸“çº¿
  - name: "ğŸ‡¨ğŸ‡³ å›½å†…ä¸“çº¿ (æˆéƒ½)"
    type: vmess
    server: 47.108.130.60
    port: 25477
    uuid: 8f800fe3-5af8-4021-cc74-fc159ca640a9
    alterId: 0
    cipher: auto
    network: ws
    ws-opts:
      path: "/"
      headers:
        Host: pull.free.video.10010.com

# --- ç­–ç•¥ç»„ ---
proxy-groups:
  # 1. æµ·å¤–æµé‡ç»„ (ä¿®æ­£æµ‹é€Ÿåœ°å€)
  - name: "ğŸ›¡ï¸ æµ·å¤–è‡ªåŠ¨ä»£ç†"
    type: fallback
    proxies:
      - "ğŸ‡©ğŸ‡ª å¾·å›½ VLESS"
      - "ğŸš€ Hy2 å¤‡ç”¨"
      - "â˜ï¸ VLESS Vision"
    # æ”¹å› Google åœ°å€ï¼Œç¨³å®šæ€§æœ€é«˜
    url: 'http://www.gstatic.com/generate_204'
    interval: 60

  # 2. å›½å†…æµé‡ç»„
  - name: "ğŸ‡¨ğŸ‡³ å›½å†…ä»£ç†"
    type: select
    proxies:
      - "ğŸ‡¨ğŸ‡³ å›½å†…ä¸“çº¿ (æˆéƒ½)"
      - "DIRECT"

# --- è§„åˆ™è®¾ç½® ---
rules:
  # 1. WebRTC é˜»æ–­
  - DST-PORT,3478,REJECT
  - DST-PORT,19302,REJECT

  # 2. Spotify åˆ†æµ
  - GEOSITE,spotify,ğŸ›¡ï¸ æµ·å¤–è‡ªåŠ¨ä»£ç†

  # 3. å›½å†…æµé‡
  - GEOSITE,cn,ğŸ‡¨ğŸ‡³ å›½å†…ä»£ç†
  - GEOIP,cn,ğŸ‡¨ğŸ‡³ å›½å†…ä»£ç†
  
  # 4. å…œåº•
  - MATCH,ğŸ›¡ï¸ æµ·å¤–è‡ªåŠ¨ä»£ç†
